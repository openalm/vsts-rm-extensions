{"id":381,"revision":104,"name":"RM.CDP","createdBy":{"id":"5f90f334-84b2-41ed-8662-232d0887d0bd","displayName":"Abhishek Agarwal","uniqueName":"abhishea@microsoft.com","url":"https://mseng.vssps.visualstudio.com/_apis/Identities/5f90f334-84b2-41ed-8662-232d0887d0bd","imageUrl":"https://mseng.visualstudio.com/_api/_common/identityImage?id=5f90f334-84b2-41ed-8662-232d0887d0bd"},"createdOn":"2016-02-23T06:27:10.623Z","modifiedBy":{"id":"2937e2b9-3e91-4ebe-9bc5-4340d82313a1","displayName":"Madhu V","uniqueName":"madhuv@microsoft.com","url":"https://mseng.vssps.visualstudio.com/_apis/Identities/2937e2b9-3e91-4ebe-9bc5-4340d82313a1","imageUrl":"https://mseng.visualstudio.com/_api/_common/identityImage?id=2937e2b9-3e91-4ebe-9bc5-4340d82313a1"},"modifiedOn":"2016-04-05T09:14:50.66Z","variables":{"agentmachinepassword":{"value":null,"isSecret":true},"agentmachineusername":{"value":"redmond\\tfsmladm"},"build.config":{"value":"Release"},"CDPScriptsShare":{"value":"\\\\Redvstt-lab43\\RmBuildDrops"},"release.alternatepassword":{"value":null,"isSecret":true},"release.alternateusername":{"value":"rmgated@microsoft.com"},"release.currentbin":{"value":"c:\\tempcurrent\\bin"},"release.goldenbin":{"value":"c:\\tempgolden\\bin"},"release.goldenbuildid":{"value":"THIS_IS_SET_AT_RUNTIME"},"release.goldenbuildnumber":{"value":"THIS_IS_SET_AT_RUNTIME"},"Release.L2TestsFolder":{"value":"C:\\temp\\L2Tests\\"},"release.rmtestgroups":{"value":"RM2Test"},"release.tempfolder":{"value":"C:\\temp\\bin"},"release.testgroup1":{"value":"RMTest"},"release.testgroup2":{"value":"RM2Test"},"release.testsfolder":{"value":"C:\\temp\\Tests"},"release.tfstestgroups":{"value":"Tfs.Tests"},"release.TfsTests":{"value":"Tfs.Tests"},"TaskToDebugTimeInSeconds":{"value":"360000"},"TestAgentPassword":{"value":null,"isSecret":true},"TestAgentUserName":{"value":"redmond\\tfsmladm"}},"environments":[{"id":1690,"name":"DevFabricUpgrade","rank":6,"owner":{"id":"722be998-3f41-4c4d-a69a-835db7a0fc55","displayName":"[VSOnline]\\RM Online DRIs","uniqueName":"vstfs:///Classification/TeamProject/b924d696-3eae-4116-8443-9a18392d8544\\RM Online DRIs","url":"https://mseng.vssps.visualstudio.com/_apis/Identities/722be998-3f41-4c4d-a69a-835db7a0fc55","imageUrl":"https://mseng.visualstudio.com/_api/_common/identityImage?id=722be998-3f41-4c4d-a69a-835db7a0fc55","isContainer":true},"variables":{"release.aotestsfolder":{"value":"C:\\Temp\\aotests"},"release.productsgroupscommaseparated":{"value":"\"sps,tfs,rmo,TfsOnPrem,AOConfigTests,RM2Test\""},"TaskToDebugName":{"value":"\"Verify Upgrade Test Result\""},"TestResourcesFileShare":{"value":"\\\\RM-NEB-AGENT2\\TestResources"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13950}]},"deployStep":{"tasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download Artifact - To be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\downloadArtifacts.ps1","arguments":"$(CDPScriptsShare) $(build.buildid) $(release.alternateusername) $(release.alternatepassword)  $(Agent.Workfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.tempfolder)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run tests folder","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.tempfolder)\\..\\Tests","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previously run aotest folder","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.aotestsfolder)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Vssbinfetch product groups","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\DeployTools -BuildId $(build.buildId) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.tempfolder) -ProductGroups $(release.productsgroupscommaseparated) ","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Cleanup devfabric and start emulator","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupDevfabric.ps1","ScriptArguments":"$(release.tempfolder)\\Scripts","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy SPS","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"sps /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy TFS","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"tfs /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy RMO","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"rmo /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy TfsOnPrem","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"TfsOnPrem /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy AOConfigTests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"AOConfigTests /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy RM2Test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"RM2Test /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Run Devfabric Upgrade test (Change to $(CDPScriptsShare) after checkin)","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"\\\\kalyan-dev\\scripts\\RunAOConfigTest.ps1","ScriptArguments":"$(release.aotestsfolder) $(release.tempfolder)\\..\\Tests\\AOTest.exe MS.TF.Test.Servicing.ReleaseManagement.dll $(TestResourcesFileShare) $(build.buildnumber)","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Verify Upgrade Test Result","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.tempfolder)\\..\\tests\\MS.TF.Test.Servicing.ReleaseManagement.dll","testFiltercriteria":"Name=CheckTestOutput","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"DevfabricUpgrade","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Pause agent on test failure","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\PauseAgentOnTaskFailure.ps1","arguments":"-AlternateCredentialsUserName  $(release.alternateusername) -AlternateCredentialsPassword  $(release.alternatepassword) -ReleaseId  $(Release.ReleaseId)  -TaskName $(TaskToDebugName) -NumberOfSeconds $(TaskToDebugTimeInSeconds)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy Snapshot to target","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"C:\\TestBackups\\* $(TestResourcesFileShare)\\UpgradeDbs","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy LR Logs","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"C:\\LR\\Tfs\\Logs  C:\\LRLogs","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Cleanup devfabric and start emulator","enabled":true,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupDevfabric.ps1","ScriptArguments":"$(release.tempfolder)\\Scripts","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}}],"id":13951},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13952}]},"queueId":137,"runOptions":{"EnvironmentOwnerEmailNotificationType":"Never","skipArtifactsDownload":"True","TimeoutInMinutes":"0"},"environmentOptions":{"emailNotificationType":"Never","skipArtifactsDownload":true,"timeoutInMinutes":0},"demands":["rmcdpcapability -equals devfabricupgrade","Agent.Version -gtVersion 1.87"],"conditions":[{"name":"ReleaseStarted","conditionType":"event","value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0}},{"id":1691,"name":"LegacyPTs","rank":9,"owner":{"id":"722be998-3f41-4c4d-a69a-835db7a0fc55","displayName":"[VSOnline]\\RM Online DRIs","uniqueName":"vstfs:///Classification/TeamProject/b924d696-3eae-4116-8443-9a18392d8544\\RM Online DRIs","url":"https://mseng.vssps.visualstudio.com/_apis/Identities/722be998-3f41-4c4d-a69a-835db7a0fc55","imageUrl":"https://mseng.visualstudio.com/_api/_common/identityImage?id=722be998-3f41-4c4d-a69a-835db7a0fc55","isContainer":true},"variables":{"release.devopscommontests":{"value":"doc"},"release.testenv":{"value":"/token:TEST_ENVIRONMENT=TestEnvCDPLegacyPT"},"TaskToDebugName":{"value":"\"Run RM legacy platform tests\""}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13953}]},"deployStep":{"tasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"downloadArtifacts - To be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\downloadArtifacts.ps1 ","arguments":"$(CDPScriptsShare) $(build.buildid) $(release.alternateusername) $(release.alternatepassword)  $(Agent.Workfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Cleanup Temp","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupTemp.cmd","arguments":"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"Clean windows temp","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(SystemRoot)\\system32\\cmd.exe","arguments":"/c \"del $(SystemRoot)\\Temp\\*.* /q\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.tempfolder)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run tests folder","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.testsfolder)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Setup tests runtime configuration","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\setupTestsRuntimeConfiguration.ps1","arguments":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"vssbinfetch product groups","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\DeployTools -BuildId $(build.buildId) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.tempfolder) -ProductGroups \"$(release.testgroup1),$(release.testgroup2),$(release.devopscommontests)\" -InstallOptions $(release.testenv)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy Doc tests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.devopscommontests)  /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"disabling framework (oss) tests","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.testsfolder)\\Microsoft.TeamFoundation.Release.Framework.PlatformTests.dll","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"disabling content repository tests","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.testsfolder)\\Microsoft.TeamFoundation.DevOps.ContentRepository.PlatformTests.dll","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run Doc platform tests","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"testAssembly":"$(release.testsfolder)\\*.PlatformTests.dll;-:$(release.testsfolder)\\Microsoft.TeamFoundation.Release.Framework.PlatformTests.dll;-:$(release.testsfolder)\\Microsoft.TeamFoundation.DevOps.ContentRepository.PlatformTests.dll;-:$(release.testsfolder)\\Microsoft.TeamFoundation.Release.SourceControl.PlatformTests.dll","testFiltercriteria":"","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\UnitTestSetting.runsettings","overrideTestrunParameters":"","codeCoverageEnabled":"true","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"LegacyPT-Doc","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run Doc onprem tests","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"testAssembly":"$(release.testsfolder)\\*.onPremTests.dll","testFiltercriteria":"","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\UnitTestSetting.runsettings","overrideTestrunParameters":"","codeCoverageEnabled":"true","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"LegacyPT-OnPrem","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run tests folder","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.testsfolder)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy RMTest and RM2Test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.testgroup1) $(release.testgroup2)  /Configuration:$(build.config) $(release.testenv) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy TestEnvCDPLegacyPT test environment file","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(release.testsfolder)\\TestEnvironments\\TestEnvCDPLegacyPT\\TestEnvironment.xml  $(Agent.ReleaseDirectory)\\TestEnvironment.xml","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run RM legacy platform tests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.testsfolder)\\*.platformtests.dll","testFiltercriteria":"","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\UnitTestSetting.runsettings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"LegacyPT-Rm","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Pause agent on test failure","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\PauseAgentOnTaskFailure.ps1","arguments":"-AlternateCredentialsUserName  $(release.alternateusername) -AlternateCredentialsPassword  $(release.alternatepassword) -ReleaseId  $(Release.ReleaseId)  -TaskName $(TaskToDebugName) -NumberOfSeconds $(TaskToDebugTimeInSeconds)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}}],"id":13954},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13955}]},"queueId":137,"runOptions":{"EnvironmentOwnerEmailNotificationType":"Never","skipArtifactsDownload":"True","TimeoutInMinutes":"0"},"environmentOptions":{"emailNotificationType":"Never","skipArtifactsDownload":true,"timeoutInMinutes":0},"demands":["rmcdpcapability -equals legacypt","Agent.Version -gtVersion 1.87"],"conditions":[{"name":"ReleaseStarted","conditionType":"event","value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0}},{"id":1692,"name":"LegacyRM","rank":8,"owner":{"id":"722be998-3f41-4c4d-a69a-835db7a0fc55","displayName":"[VSOnline]\\RM Online DRIs","uniqueName":"vstfs:///Classification/TeamProject/b924d696-3eae-4116-8443-9a18392d8544\\RM Online DRIs","url":"https://mseng.vssps.visualstudio.com/_apis/Identities/722be998-3f41-4c4d-a69a-835db7a0fc55","imageUrl":"https://mseng.visualstudio.com/_api/_common/identityImage?id=722be998-3f41-4c4d-a69a-835db7a0fc55","isContainer":true},"variables":{"release.productsgroupscommaseparated":{"value":"\"RMOnPrem,RMTest,RM2Test\""},"release.testenv":{"value":"/token:TEST_ENVIRONMENT=TestEnvCDPLegacyOnPrem"},"TaskToDebugName":{"value":"\"Run LegacyOnPrem tests\""}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13956}]},"deployStep":{"tasks":[{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"Copy downloadArtifacts script - To be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\Windows\\System32\\cmd.exe","arguments":"/k \"copy /y  $(CDPScriptsShare)\\downloadArtifacts.ps1 C:\\downloadArtifacts.ps1\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download Artifacts - To be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"C:\\downloadArtifacts.ps1","arguments":"$(CDPScriptsShare) $(build.buildid) $(release.alternateusername) $(release.alternatepassword)  $(Agent.Workfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Cleanup Temp","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupTemp.cmd","arguments":"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.tempfolder)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run tests folder","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.testsfolder)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Setup tests runtime configuration","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\setupTestsRuntimeConfiguration.ps1","arguments":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Vssbinfetch product groups","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\DeployTools -BuildId $(build.buildId) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.tempfolder) -ProductGroups $(release.productsgroupscommaseparated) -InstallOptions $(release.testenv)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy RMTest and RM2Test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.testgroup1) $(release.testgroup2) /Configuration:$(build.config) $(release.testenv) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"CleanupRM","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\cleanupRM.ps1","arguments":"-BinDirectory $(release.tempfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"deployRM","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\deployRM.ps1","arguments":"-showLoginPrompt 0 -Configuration $(build.config) -launchClient 0 -BinDirectory $(release.tempfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run LegacyOnPrem tests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.testsfolder)\\*.test.release*.dll","testFiltercriteria":"TestCategory=RMRollingLegacyOnPrem","runSettingsFile":"$(release.testsfolder)\\RM.testsettings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"LegacyRM","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Pause agent on test failure","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\PauseAgentOnTaskFailure.ps1","arguments":"-AlternateCredentialsUserName  $(release.alternateusername) -AlternateCredentialsPassword  $(release.alternatepassword) -ReleaseId  $(Release.ReleaseId)  -TaskName $(TaskToDebugName) -NumberOfSeconds $(TaskToDebugTimeInSeconds)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}}],"id":13959},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13960}]},"queueId":137,"runOptions":{"EnvironmentOwnerEmailNotificationType":"Never","skipArtifactsDownload":"True","TimeoutInMinutes":"0"},"environmentOptions":{"emailNotificationType":"Never","skipArtifactsDownload":true,"timeoutInMinutes":0},"demands":["rmcdpcapability -equals legacyrm","Agent.Version -gtVersion 1.87"],"conditions":[{"name":"ReleaseStarted","conditionType":"event","value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0}},{"id":1693,"name":"RmEqTfs","rank":2,"owner":{"id":"722be998-3f41-4c4d-a69a-835db7a0fc55","displayName":"[VSOnline]\\RM Online DRIs","uniqueName":"vstfs:///Classification/TeamProject/b924d696-3eae-4116-8443-9a18392d8544\\RM Online DRIs","url":"https://mseng.vssps.visualstudio.com/_apis/Identities/722be998-3f41-4c4d-a69a-835db7a0fc55","imageUrl":"https://mseng.visualstudio.com/_api/_common/identityImage?id=722be998-3f41-4c4d-a69a-835db7a0fc55","isContainer":true},"variables":{"release.devfabricgroups":{"value":"THIS_IS_SET_AT_RUNTIME"},"release.productsgroupscommaseparated":{"value":"THIS_IS_SET_AT_RUNTIME"},"release.testenv":{"value":"/token:TEST_ENVIRONMENT=TestEnvCDPDevFabric"},"RML2Test":{"value":"THIS_IS_SET_AT_RUNTIME"},"RMO":{"value":"THIS_IS_SET_AT_RUNTIME"},"SPS":{"value":"THIS_IS_SET_AT_RUNTIME"},"TaskToDebugName":{"value":"\"Run RMCDPOnLineRmEQTfs tests\""},"TFS":{"value":"THIS_IS_SET_AT_RUNTIME"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":true,"id":13957}]},"deployStep":{"tasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download Artifacts - To be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\downloadArtifacts.ps1","arguments":"$(CDPScriptsShare) $(build.buildid) $(release.alternateusername) $(release.alternatepassword) $(Agent.Workfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.tempfolder)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run tests folder","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.testsfolder)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Set L2 Product Groups if available","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"\\\\vscsstor\\users\\dhgovind\\L2Compute.ps1","arguments":"$(BUILD.SOURCEBRANCHNAME)","inlineScript":"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Vssbinfetch product groups","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\DeployTools -BuildId $(build.buildId) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.tempfolder) -ProductGroups $(release.productsgroupscommaseparated) ","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Cleanup devfabric and start emulator","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupDevfabric.ps1","arguments":"$(release.tempfolder)\\Scripts","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Deploy Sps","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\DeployService.ps1","arguments":"$(release.tempfolder)\\scripts $(SPS) $(build.config)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Deploy Tfs","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\DeployService.ps1","arguments":"$(release.tempfolder)\\scripts $(TFS) $(build.config)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Deploy Rmo","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\DeployService.ps1","arguments":"$(release.tempfolder)\\scripts $(RMO) $(build.config)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy L2 Tests","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(RML2Test) /Configuration:$(build.config)  /WarningsToStdout /token:TESTS_DIR=$(Release.L2TestsFolder)","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Enabling feature flags","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":"task","inputs":{"filename":"$(Release.L2TestsFolder)\\TestScripts\\EnableDfFeatureFlags.cmd","arguments":"","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run L2 Tests","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"testAssembly":"$(Release.L2TestsFolder)*ReleaseManagement.Integration.L2.Tests.dll","testFiltercriteria":"","runSettingsFile":"\\\\vscsstor\\Users\\dhgovind\\ReleaseManagement.L2.runsettings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"14.0","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"RmEqTfs L2","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy TfsTests and RM2Test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.TfsTests) $(release.testgroup2) /Configuration:$(build.config)  /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"*","name":"Copy test environment file","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"SourceFolder":"$(release.testsfolder)\\TestEnvironments\\TestEnvCDPDevFabric","Contents":"TestEnvironment.xml","TargetFolder":"$(release.testsfolder)","CleanTargetFolder":"false","OverWrite":"true"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy TestEnvCDPDevFabric test environment file","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(release.testsfolder)\\TestEnvironments\\TestEnvCDPDevFabric\\TestEnvironment.xml  $(release.testsfolder)\\TestEnvironment.xml","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run ping test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.testsfolder)\\MS.TF.Test.Release3.dll","testFiltercriteria":"Name=PingDeploymentAndInitializeTestData","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"RmEqTfs-Ping","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run RmEqTfs tests","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"testAssembly":"$(release.testsfolder)\\MS.TF.Test.Release3.dll","testFiltercriteria":"TestCategory=RMCDPOnLineRmEQTfs","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"RmEqTfs","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Pause agent on test failure","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\PauseAgentOnTaskFailure.ps1","arguments":"-AlternateCredentialsUserName  $(release.alternateusername) -AlternateCredentialsPassword  $(release.alternatepassword) -ReleaseId  $(Release.ReleaseId)  -TaskName $(TaskToDebugName) -NumberOfSeconds $(TaskToDebugTimeInSeconds)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Enable DevFabric feature flags","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.testsfolder)\\EnableDfFeatureFlags.cmd","arguments":"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy RmTwaDevfabric test environment file","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(release.testsfolder)\\TestEnvironment\\TwaDevFabric\\TestEnvironment.xml  $(release.testsfolder)\\TestEnvironment.xml","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"52a38a6a-1517-41d7-96cc-73ee0c60d2b6","version":"*","name":"Deploy TestAgent on RM-CDP-RmEqTfs","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testMachineGroup":"RM-CDP-RmEqTfs","adminUserName":"","adminPassword":"","winRmProtocol":"Https","testCertificate":"true","resourceFilteringMethod":"machineNames","testMachines":"","machineUserName":"$(TestAgentUserName)","machinePassword":"$(TestAgentPassword)","runAsProcess":"true","agentLocation":"","updateTestAgent":"false","isDataCollectionOnly":"false"}},{"taskId":"d353d6a2-e361-4a8f-8d8c-123bebb71028","version":"*","name":"Run RM-TWA E2E Tests","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testMachineGroup":"RM-CDP-RmEqTfs","dropLocation":"$(release.tempfolder)\\..\\Tests","testSelection":"testAssembly","testPlan":"","testSuite":"","testConfiguration":"","sourcefilters":"$(release.testsfolder)\\MS.TF.Test.RM.Web.FunctionalTests.dll","testFilterCriteria":"Name=ReleaseRDWithMultipleEnvironmentsAndEnvironmentVariablesTest","runSettingsFile":"$(release.testsfolder)\\RmTwaDevFabric.testSettings","overrideRunParams":"","codeCoverageEnabled":"false","testRunTitle":"RmEqTfs-TWA","platform":"","configuration":"","testConfigurations":"","autMachineGroup":""}},{"taskId":"d353d6a2-e361-4a8f-8d8c-123bebb71028","version":"*","name":"Run All RMTWA Tests","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testMachineGroup":"RM-CDP-RmEqTfs","dropLocation":"$(release.tempfolder)\\..\\Tests","testSelection":"testAssembly","testPlan":"","testSuite":"","testConfiguration":"","sourcefilters":"$(release.testsfolder)\\MS.TF.Test.RM.Web.FunctionalTests.dll","testFilterCriteria":"TestCategory=RMCDPPullRequest","runSettingsFile":"$(release.testsfolder)\\RmTwaDevFabric.testSettings","overrideRunParams":"","codeCoverageEnabled":"false","testRunTitle":"RmEqTfs-TWA","platform":"","configuration":"","testConfigurations":"","autMachineGroup":""}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run RM-TWA E2E Tests","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.testsfolder)\\MS.TF.Test.RM.Web.FunctionalTests.dll","testFiltercriteria":"TestCategory=RMCDPPullRequest","runSettingsFile":"$(release.testsfolder)\\RmTwaDevFabric.testSettings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"true","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"RmEqTfs-TWA","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"TODO:::Enable on OnPrem --- Run TWA E2E Tests (L2)","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":"task","inputs":{"testAssembly":"$(Release.L2TestsFolder)\\ReleaseManagement.WebPlatform.L2.Tests.dll","testFiltercriteria":"","runSettingsFile":"$(Release.L2TestsFolder)\\RM.L2.runsettings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"TWA E2E Tests (L2)","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Cleanup devfabric and start emulator","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupDevfabric.ps1","ScriptArguments":"$(release.tempfolder)\\Scripts","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Cleanup devfabric and start emulator","enabled":true,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupDevfabric.ps1","arguments":"$(release.tempfolder)\\Scripts","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}}],"id":13958},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13961}]},"queueId":137,"runOptions":{"EnvironmentOwnerEmailNotificationType":"Never","skipArtifactsDownload":"True","TimeoutInMinutes":"0"},"environmentOptions":{"emailNotificationType":"Never","skipArtifactsDownload":true,"timeoutInMinutes":0},"demands":["rmcdpcapability -equals rmeqtfs","Agent.Version -gtVersion 1.87"],"conditions":[{"name":"ReleaseStarted","conditionType":"event","value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0}},{"id":1694,"name":"RmGtTfs","rank":3,"owner":{"id":"722be998-3f41-4c4d-a69a-835db7a0fc55","displayName":"[VSOnline]\\RM Online DRIs","uniqueName":"vstfs:///Classification/TeamProject/b924d696-3eae-4116-8443-9a18392d8544\\RM Online DRIs","url":"https://mseng.vssps.visualstudio.com/_apis/Identities/722be998-3f41-4c4d-a69a-835db7a0fc55","imageUrl":"https://mseng.visualstudio.com/_api/_common/identityImage?id=722be998-3f41-4c4d-a69a-835db7a0fc55","isContainer":true},"variables":{"release.currentdevfabricsfordownload":{"value":"\"rmo,RM2Test,Tfs.Tests\""},"release.goldendevfabricsfordownload":{"value":"\"sps,gallery,ems,tfs,RM2Test,Tfs.Tests\""},"TaskToDebugName":{"value":"\"Run current RMCDPOnLineRmGTTfs tests\""}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13962}]},"deployStep":{"tasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download Artifacts - To be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\downloadArtifacts.ps1","arguments":"$(CDPScriptsShare) $(build.buildid) $(release.alternateusername) $(release.alternatepassword)  $(Agent.Workfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run current binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.currentbin)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run current tests folder","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.currentbin)\\..\\tests","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Vssbinfetch current product groups","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\DeployTools -BuildId $(build.buildId) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.currentbin) -ProductGroups $(release.currentdevfabricsfordownload) ","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Compute Golden VSO.RM.CI Build","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\SetGoldenBuildInfo.ps1","arguments":"-RMDefaultsFilePath $(release.currentbin)\\Release.AnyCPU\\ReleaseManagement.Service\\Settings\\ReleaseManagement.Defaults -TfsCollectionUri https://mseng.visualstudio.com/DefaultCollection/ -TeamProject VSOnline -AlternateCredentialsUserName $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -BuildDefinitionId 1715 -BuildCount 150","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download golden artifacts - to be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\downloadArtifacts.ps1","arguments":"$(CDPScriptsShare) $(release.goldenbuildid) $(release.alternateusername) $(release.alternatepassword)  $(Agent.Workfolder)\\GoldenBuildArtifacts","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run golden binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.goldenbin)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run golden tests folder","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.goldenbin)\\..\\tests","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Vssbinfetch golden product groups","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\GoldenBuildArtifacts\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\GoldenBuildArtifacts\\DeployTools -BuildId $(release.goldenbuildid) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.goldenbin) -ProductGroups $(release.goldendevfabricsfordownload)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Cleanup devfabric and start emulator","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupDevfabric.ps1","arguments":"$(release.currentbin)\\Scripts","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Deploy golden Sps","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\DeployService.ps1","arguments":"$(release.goldenbin)\\scripts Sps $(build.config)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Deploy golden Tfs","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\DeployService.ps1","arguments":"$(release.goldenbin)\\scripts Tfs $(build.config)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Deploy current Rmo","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\DeployService.ps1","arguments":"$(release.currentbin)\\scripts RMO $(build.config) ","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Cleanup devfabric and start emulator","enabled":false,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupDevfabric.ps1","ScriptArguments":"$(release.currentbin)\\Scripts","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy golden Sps","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.goldenbin)\\scripts\\vssdf.cmd","arguments":"Sps /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.goldenbin)\\scripts","failOnStandardError":"false"}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Deploy golden Sps","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(CDPScriptsShare)\\DeployService.ps1","ScriptArguments":"$(release.goldenbin)\\scripts Sps $(build.config)","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy golden Tfs","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.goldenbin)\\scripts\\vssdf.cmd","arguments":"Tfs /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.goldenbin)\\scripts","failOnStandardError":"false"}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Deploy golden gallery","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(CDPScriptsShare)\\DeployService.ps1","ScriptArguments":"$(release.goldenbin)\\scripts gallery $(build.config)","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":""}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Deploy golden ems","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(CDPScriptsShare)\\DeployService.ps1","ScriptArguments":"$(release.goldenbin)\\scripts ems $(build.config)","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":""}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Deploy golden Tfs","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(CDPScriptsShare)\\DeployService.ps1","ScriptArguments":"$(release.goldenbin)\\scripts Tfs $(build.config)","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Disable lock violation - to be removed","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(CDPScriptsShare)\\DisableLockViolation.ps1","ScriptArguments":"","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy current Rmo","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.currentbin)\\scripts\\vssdf.cmd","arguments":"rmo /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.currentbin)\\scripts","failOnStandardError":"false"}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Deploy current RMO","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(CDPScriptsShare)\\DeployService.ps1","ScriptArguments":"$(release.currentbin)\\scripts RMO $(build.config) ","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy golden Tfs tests and RM2Test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.goldenbin)\\scripts\\vssi.cmd","arguments":"$(release.tfstestgroups) $(release.rmtestgroups) /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.goldenbin)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy golden TfsTests","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.goldenbin)\\scripts\\vssi.cmd","arguments":"$(release.tfstestgroups) /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.goldenbin)\\scripts","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy golden TestEnvCDPDevFabric test environment file","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(release.goldenbin)\\..\\tests\\TestEnvironments\\TestEnvCDPDevFabric\\TestEnvironment.xml  $(release.goldenbin)\\..\\tests\\TestEnvironment.xml","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"*","name":"Copy golden test environment file","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"SourceFolder":"$(release.goldenbin)\\..\\tests\\TestEnvironments\\TestEnvCDPDevFabric","Contents":"TestEnvironment.xml","TargetFolder":"$(release.goldenbin)\\..\\tests","CleanTargetFolder":"false","OverWrite":"true"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run golden ping test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.goldenbin)\\..\\tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"Name=PingDeploymentAndInitializeTestData","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"RmGtTfs-Ping","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy current Tfs tests and RM2Test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.currentbin)\\scripts\\vssi.cmd","arguments":"$(release.tfstestgroups) $(release.rmtestgroups) /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.currentbin)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy current TfsTests","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.currentbin)\\scripts\\vssi.cmd","arguments":"$(release.tfstestgroups) /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.currentbin)\\scripts","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"*","name":"Copy current RmGtTfs test environment file","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"SourceFolder":"$(release.currentbin)\\..\\tests\\TestEnvironments\\TestEnvCDPRmLtTfs","Contents":"TestEnvironment.xml","TargetFolder":"$(release.currentbin)\\..\\tests","CleanTargetFolder":"false","OverWrite":"true"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy current TestEnvCDPRmLtTfs test environment file","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(release.currentbin)\\..\\tests\\TestEnvironments\\TestEnvCDPRmLtTfs\\TestEnvironment.xml  $(release.currentbin)\\..\\tests\\TestEnvironment.xml","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Investigation","enabled":false,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"testAssembly":"C:\\M95Tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"Name=EnsureRmClientIsUpTest","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"EnsureRmClientIsUpTest","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run current RmGTTfs tests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.currentbin)\\..\\tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"TestCategory=RMCDPOnLineRmGTTfs","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"RmGtTfs","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Pause agent on test failure","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\PauseAgentOnTaskFailure.ps1","arguments":"-AlternateCredentialsUserName  $(release.alternateusername) -AlternateCredentialsPassword  $(release.alternatepassword) -ReleaseId  $(Release.ReleaseId)  -TaskName $(TaskToDebugName) -NumberOfSeconds $(TaskToDebugTimeInSeconds)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"Run wevtutil","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"filename":"wevtutil","arguments":"epl Application $(CDPScriptsShare)\\EventLogs\\RM.CDP_RmGtTfs_$(Build.BuildNumber).evtx","workingFolder":"","failOnStandardError":"false"}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Cleanup devfabric and start emulator","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupDevfabric.ps1","ScriptArguments":"$(release.currentbin)\\Scripts","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Cleanup devfabric and start emulator","enabled":true,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupDevfabric.ps1","arguments":"$(release.currentbin)\\Scripts","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}}],"id":13969},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13970}]},"queueId":137,"runOptions":{"EnvironmentOwnerEmailNotificationType":"Never","skipArtifactsDownload":"True","TimeoutInMinutes":"0"},"environmentOptions":{"emailNotificationType":"Never","skipArtifactsDownload":true,"timeoutInMinutes":0},"demands":["rmcdpcapability -equals rmgttfs","Agent.Version -gtVersion 1.87"],"conditions":[{"name":"ReleaseStarted","conditionType":"event","value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0}},{"id":1695,"name":"RmLtTfs","rank":4,"owner":{"id":"722be998-3f41-4c4d-a69a-835db7a0fc55","displayName":"[VSOnline]\\RM Online DRIs","uniqueName":"vstfs:///Classification/TeamProject/b924d696-3eae-4116-8443-9a18392d8544\\RM Online DRIs","url":"https://mseng.vssps.visualstudio.com/_apis/Identities/722be998-3f41-4c4d-a69a-835db7a0fc55","imageUrl":"https://mseng.visualstudio.com/_api/_common/identityImage?id=722be998-3f41-4c4d-a69a-835db7a0fc55","isContainer":true},"variables":{"release.currentdevfabricsfordownload":{"value":"\"gallery,ems,tfs,sps,RM2Test,Tfs.Tests\""},"release.currenttestenv":{"value":"/token:TEST_ENVIRONMENT=TestEnvCDPDevFabric"},"release.goldendevfabricsfordownload":{"value":"\"rmo,RM2Test,Tfs.Tests\""},"release.goldentestenv":{"value":"/token:TEST_ENVIRONMENT=TestEnvCDPRmLtTfs"},"TaskToDebugName":{"value":"\"Run golden RMCDPOnLineRmLTTfs tests\""}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13963}]},"deployStep":{"tasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download Artifacts - To be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\downloadArtifacts.ps1","arguments":"$(CDPScriptsShare) $(build.buildid) $(release.alternateusername) $(release.alternatepassword)  $(Agent.Workfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run current binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.currentbin)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run current tests folder","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.currentbin)\\..\\tests","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Vssbinfetch current product groups","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\DeployTools -BuildId $(build.buildId) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.currentbin) -ProductGroups $(release.currentdevfabricsfordownload) ","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Compute Golden VSO.RM.CI Build","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\SetGoldenBuildInfo.ps1","arguments":"-RMDefaultsFilePath $(release.currentbin)\\Release.AnyCPU\\Tfs.Tools\\Tfs\\Settings\\Tfs.defaults -TfsCollectionUri https://mseng.visualstudio.com/DefaultCollection/ -TeamProject VSOnline -AlternateCredentialsUserName $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -BuildDefinitionId 1715 -BuildCount 150","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download golden artifacts - to be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\downloadArtifacts.ps1","arguments":"$(CDPScriptsShare) $(release.goldenbuildid) $(release.alternateusername) $(release.alternatepassword)  $(Agent.Workfolder)\\GoldenBuildArtifacts","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run golden binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.goldenbin)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run golden tests folder","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.goldenbin)\\..\\tests","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Vssbinfetch golden product groups","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\GoldenBuildArtifacts\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\GoldenBuildArtifacts\\DeployTools -BuildId $(release.goldenbuildid) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.goldenbin) -ProductGroups $(release.goldendevfabricsfordownload)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Cleanup devfabric and start emulator","enabled":false,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupDevfabric.ps1","ScriptArguments":"$(release.currentbin)\\Scripts","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Cleanup devfabric and start emulator","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupDevfabric.ps1","arguments":"$(release.currentbin)\\Scripts","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Deploy current Sps","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\DeployService.ps1","arguments":"$(release.currentbin)\\scripts Sps $(build.config)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Deploy current Tfs","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\DeployService.ps1","arguments":"$(release.currentbin)\\scripts Tfs $(build.config)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Deploy golden Rmo","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\DeployService.ps1","arguments":"$(release.goldenbin)\\scripts RMO $(build.config)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy current Tfs","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.currentbin)\\scripts\\vssdf.cmd","arguments":"Tfs /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.currentbin)\\scripts","failOnStandardError":"false"}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Deploy current Sps","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(CDPScriptsShare)\\DeployService.ps1","ScriptArguments":"$(release.currentbin)\\scripts Sps $(build.config)","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Deploy current gallery","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(CDPScriptsShare)\\DeployService.ps1","ScriptArguments":"$(release.currentbin)\\scripts gallery $(build.config)","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":""}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Deploy current ems","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(CDPScriptsShare)\\DeployService.ps1","ScriptArguments":"$(release.currentbin)\\scripts ems $(build.config)","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":""}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Deploy current Tfs","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(CDPScriptsShare)\\DeployService.ps1","ScriptArguments":"$(release.currentbin)\\scripts Tfs $(build.config)","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Disable lock violation - to be removed","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(CDPScriptsShare)\\DisableLockViolation.ps1","ScriptArguments":"","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy golden Rmo","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.goldenbin)\\scripts\\vssdf.cmd","arguments":"rmo /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.goldenbin)\\scripts","failOnStandardError":"false"}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Deploy golden RMO","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(CDPScriptsShare)\\DeployService.ps1","ScriptArguments":"$(release.goldenbin)\\scripts RMO $(build.config)","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy current Tfs tests and RM2Test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.currentbin)\\scripts\\vssi.cmd","arguments":"$(release.tfstestgroups) $(release.rmtestgroups) /Configuration:$(build.config)  /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.currentbin)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy current TfsTests","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.currentbin)\\scripts\\vssi.cmd","arguments":"$(release.tfstestgroups) /Configuration:$(build.config)  /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.currentbin)\\scripts","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"*","name":"Copy current test environment file","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"SourceFolder":"$(release.currentbin)\\..\\tests\\TestEnvironments\\TestEnvCDPDevFabric","Contents":"TestEnvironment.xml","TargetFolder":"$(release.currentbin)\\..\\tests","CleanTargetFolder":"false","OverWrite":"true"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy current TestEnvCDPDevFabric test environment file","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(release.currentbin)\\..\\tests\\TestEnvironments\\TestEnvCDPDevFabric\\TestEnvironment.xml  $(release.currentbin)\\..\\tests\\TestEnvironment.xml","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run current ping test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.currentbin)\\..\\tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"Name=PingDeploymentAndInitializeTestData","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"RmLtTfs-Ping","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Powershell: $(CDPScriptsShare)\\ForceSleep.ps1","enabled":false,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\ForceSleep.ps1","arguments":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy golden Tfs tests and RM2Test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.goldenbin)\\scripts\\vssi.cmd","arguments":"$(release.tfstestgroups) $(release.rmtestgroups) /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.goldenbin)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy golden TfsTests","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.goldenbin)\\scripts\\vssi.cmd","arguments":"$(release.tfstestgroups) /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.goldenbin)\\scripts","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy golden TestEnvCDPRmLtTfs test environment file","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(release.goldenbin)\\..\\tests\\TestEnvironments\\TestEnvCDPRmLtTfs\\TestEnvironment.xml  $(release.goldenbin)\\..\\tests\\TestEnvironment.xml","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"*","name":"Copy RmLtTfs test environment file","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"SourceFolder":"$(release.goldenbin)\\..\\tests\\TestEnvironments\\TestEnvCDPRmLtTfs","Contents":"TestEnvironment.xml","TargetFolder":"$(release.goldenbin)\\..\\tests","CleanTargetFolder":"false","OverWrite":"true"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Investing SPS Issue","enabled":false,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"testAssembly":"$(release.goldenbin)\\..\\tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"Name=PingDeploymentAndInitializeTestData","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"EnsureRmClientIsUpTest","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run golden RmLTTfs tests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.goldenbin)\\..\\tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"TestCategory=RMCDPOnLineRmLTTfs","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"RmLtTfs","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Pause agent on test failure","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\PauseAgentOnTaskFailure.ps1","arguments":"-AlternateCredentialsUserName  $(release.alternateusername) -AlternateCredentialsPassword  $(release.alternatepassword) -ReleaseId  $(Release.ReleaseId)  -TaskName $(TaskToDebugName) -NumberOfSeconds $(TaskToDebugTimeInSeconds)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"3b5693d4-5777-4fee-862a-bd2b7a374c68","version":"*","name":"Cleanup devfabric and start emulator","enabled":false,"alwaysRun":true,"continueOnError":true,"definitionType":null,"inputs":{"EnvironmentName":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com","AdminUserName":"$(agentmachineusername)","AdminPassword":"$(agentmachinepassword)","Protocol":"Http","TestCertificate":"true","ScriptPath":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupDevfabric.ps1","ScriptArguments":"$(release.currentbin)\\Scripts","InitializationScriptPath":"","SessionVariables":"","RunPowershellInParallel":"true","ResourceFilteringMethod":"machineNames","MachineNames":"$(AGENT.MACHINENAME).redmond.corp.microsoft.com"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Cleanup devfabric and start emulator","enabled":true,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupDevfabric.ps1","arguments":"$(release.currentbin)\\Scripts","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"Diagnostic: Copy eventvwr logs","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"wevtutil","arguments":"epl Application $(CDPScriptsShare)\\EventLogs\\RM.CDP_RmLtTfs_$(Build.BuildNumber).evtx","workingFolder":"","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"*","name":"Diagnostic: Copy agent logs","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"SourceFolder":"C:\\Agent\\RM-TestDefault-RM-NEB-AGENT5\\_diag","Contents":"**","TargetFolder":"$(CDPScriptsShare)\\EventLogs\\RM.CDP_RmLtTfs_$(Build.BuildNumber)_AgentLogs","CleanTargetFolder":"false","OverWrite":"false"}}],"id":13968},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13971}]},"queueId":137,"runOptions":{"EnvironmentOwnerEmailNotificationType":"Never","skipArtifactsDownload":"True","TimeoutInMinutes":"0"},"environmentOptions":{"emailNotificationType":"Never","skipArtifactsDownload":true,"timeoutInMinutes":0},"demands":["rmcdpcapability -equals rmlttfs","Agent.Version -gtVersion 1.87"],"conditions":[{"name":"ReleaseStarted","conditionType":"event","value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0}},{"id":1696,"name":"TfsOnPrem","rank":1,"owner":{"id":"722be998-3f41-4c4d-a69a-835db7a0fc55","displayName":"[VSOnline]\\RM Online DRIs","uniqueName":"vstfs:///Classification/TeamProject/b924d696-3eae-4116-8443-9a18392d8544\\RM Online DRIs","url":"https://mseng.vssps.visualstudio.com/_apis/Identities/722be998-3f41-4c4d-a69a-835db7a0fc55","imageUrl":"https://mseng.visualstudio.com/_api/_common/identityImage?id=722be998-3f41-4c4d-a69a-835db7a0fc55","isContainer":true},"variables":{"release.productsgroupscommaseparated":{"value":"\"tfsscripteddeploy,tfsonprem,Tfs.Tests,RMTest,RM2Test\""},"release.testenv":{"value":"/token:TEST_ENVIRONMENT=TestEnvCDPTfat"},"release.TfsScriptedDeploy":{"value":"TfsScriptedDeploy"},"release.TfsScriptedDeployOptions":{"value":"/token:DEPLOY_DIR=C:\\temp\\bin\\TfsScriptedDeploy"},"System.debug":{"value":"True"},"TaskToDebugName":{"value":"\"Run UI Tests on RM-CDP-TfsOnPrem\""}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13964}]},"deployStep":{"tasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download Artifacts - To be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\downloadArtifacts.ps1","arguments":"$(CDPScriptsShare) $(build.buildid) $(release.alternateusername) $(release.alternatepassword)  $(Agent.Workfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Cleanup Temp","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupTemp.cmd","arguments":"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.tempfolder)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run tests folder","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.tempfolder)\\..\\Tests","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Vssbinfetch product groups","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\DeployTools -BuildId $(build.buildId) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.tempfolder) -ProductGroups $(release.productsgroupscommaseparated) -InstallOptions $(release.testenv)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy TfsScriptedDeploy","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.TfsScriptedDeploy) /Configuration:$(build.config) $(release.testenv) $(release.TfsScriptedDeployOptions) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"TfsCleanup","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\TfsScriptedDeploy\\TfsCleanup.exe","arguments":"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Tfat cleanup with retries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupTfat.ps1","arguments":"-NumberOfRetries 10 -SleepTimeBetweenRetriesInSeconds 5","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Run tfat","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\runtfat.cmd","arguments":"$(release.tempfolder)\\scripts $(build.config)","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Setup tests runtime configuration","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\setupTestsRuntimeConfiguration.ps1","arguments":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy RM2Test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.testgroup2) /Configuration:$(build.config) $(release.testenv) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy TfsTests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.TfsTests) /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy TestEnvCDPTfat test environment file","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(release.tempfolder)\\..\\Tests\\TestEnvironments\\TestEnvCDPTfat\\TestEnvironment.xml  $(release.tempfolder)\\..\\Tests\\TestEnvironment.xml","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Configure Agent - to be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"\\\\vscsstor\\users\\dhgovind\\ConfigureAgent.cmd","arguments":"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run RMCDPOnPrem tests","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"testAssembly":"$(release.tempfolder)\\..\\Tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"TestCategory=RMCDPOnPrem","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"TfsOnPrem","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"Enable feature flags","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"sqlcmd.exe","arguments":"-S localhost -i $(release.tempfolder)\\..\\Tests\\EnableFlags.sql","workingFolder":"C:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn","failOnStandardError":"false"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run RM-TWA E2E tests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.tempfolder)\\..\\Tests\\MS.TF.Test.RM.Web.FunctionalTests.dll","testFiltercriteria":"TestCategory=RMCDPPullRequest","runSettingsFile":"$(release.tempfolder)\\..\\Tests\\RmTwaOnPrem.testSettings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"true","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"","platform":"","configuration":"TfsOnPrem-TWA","publishRunAttachments":"true"}},{"taskId":"52a38a6a-1517-41d7-96cc-73ee0c60d2b6","version":"*","name":"Deploy TestAgent on RM-CDP-TfsOnPrem","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testMachineGroup":"RM-CDP-TfsOnPrem","adminUserName":"","adminPassword":"","winRmProtocol":"Http","testCertificate":"true","resourceFilteringMethod":"machineNames","testMachines":"","machineUserName":"$(TestAgentUserName)","machinePassword":"$(TestAgentPassword)","runAsProcess":"true","agentLocation":"","updateTestAgent":"false","isDataCollectionOnly":"false"}},{"taskId":"d353d6a2-e361-4a8f-8d8c-123bebb71028","version":"*","name":"Run UI Tests on RM-CDP-TfsOnPrem","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testMachineGroup":"RM-CDP-TfsOnPrem","dropLocation":"$(release.tempfolder)\\..\\Tests","testSelection":"testAssembly","testPlan":"","testSuite":"","testConfiguration":"","sourcefilters":"$(release.tempfolder)\\..\\Tests\\MS.TF.Test.RM.Web.FunctionalTests.dll","testFilterCriteria":"TestCategory~RMCDP","runSettingsFile":"$(release.tempfolder)\\..\\Tests\\RmTwaOnPrem.testSettings","overrideRunParams":"","codeCoverageEnabled":"false","testRunTitle":"TfsOnPrem-TWA","platform":"","configuration":"","testConfigurations":"","autMachineGroup":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Pause agent on test failure","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\PauseAgentOnTaskFailure.ps1","arguments":"-AlternateCredentialsUserName  $(release.alternateusername) -AlternateCredentialsPassword  $(release.alternatepassword) -ReleaseId  $(Release.ReleaseId)  -TaskName $(TaskToDebugName) -NumberOfSeconds $(TaskToDebugTimeInSeconds)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}}],"id":13967},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13972}]},"queueId":137,"runOptions":{"EnvironmentOwnerEmailNotificationType":"Never","skipArtifactsDownload":"True","TimeoutInMinutes":"0"},"environmentOptions":{"emailNotificationType":"Never","skipArtifactsDownload":true,"timeoutInMinutes":0},"demands":["rmcdpcapability -equals tfsonprem","Agent.Version -gtVersion 1.87"],"conditions":[{"name":"ReleaseStarted","conditionType":"event","value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0}},{"id":1697,"name":"TfsOnPremUpgrade","rank":5,"owner":{"id":"722be998-3f41-4c4d-a69a-835db7a0fc55","displayName":"[VSOnline]\\RM Online DRIs","uniqueName":"vstfs:///Classification/TeamProject/b924d696-3eae-4116-8443-9a18392d8544\\RM Online DRIs","url":"https://mseng.vssps.visualstudio.com/_apis/Identities/722be998-3f41-4c4d-a69a-835db7a0fc55","imageUrl":"https://mseng.visualstudio.com/_api/_common/identityImage?id=722be998-3f41-4c4d-a69a-835db7a0fc55","isContainer":true},"variables":{"release.productsgroupscommaseparated":{"value":"\"deployprereqs,tfsscripteddeploy,phantom,tfsonprem,TfsClient,Tfs.Tests\""},"release.testenv":{"value":"/token:TEST_ENVIRONMENT=TestEnvCDPTfat"},"release.TfsClient":{"value":"TfsClient"},"release.TfsScriptedDeploy":{"value":"TfsScriptedDeploy"},"release.TfsScriptedDeployOptions":{"value":"/token:DEPLOY_DIR=C:\\temp\\bin\\TfsScriptedDeploy"},"TaskToDebugName":{"value":"\"Run RMCDPOnPrem Upgrade tests\""},"TFSInstallLocation":{"value":"C:\\Program Files\\Microsoft Team Foundation Server 15.0"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13965}]},"deployStep":{"tasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download Artifacts - To be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\downloadArtifacts.ps1","arguments":"$(CDPScriptsShare) $(build.buildid) $(release.alternateusername) $(release.alternatepassword)  $(Agent.Workfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Cleanup Temp","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupTemp.cmd","arguments":"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.tempfolder)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run tests folder","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.tempfolder)\\..\\tests","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Vssbinfetch product groups","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\DeployTools -BuildId $(build.buildId) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.tempfolder) -ProductGroups $(release.productsgroupscommaseparated) -InstallOptions $(release.testenv)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Clean Cache","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\Clean_Cache.bat","arguments":"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy TfsScriptedDeploy","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.TfsScriptedDeploy) /Configuration:$(build.config) $(release.testenv) $(release.TfsScriptedDeployOptions) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"TfsCleanup","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\TfsScriptedDeploy\\TfsCleanup.exe","arguments":"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Tfat cleanup with retries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\CleanupTfat.ps1","arguments":"-NumberOfRetries 10 -SleepTimeBetweenRetriesInSeconds 5","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy TfsTests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.TfsTests) /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"Drop Databases","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\..\\tests\\Phantom.exe","arguments":"RollingStep /step:DropDatabases AS DT  /timeout:14 /rawbin:$(release.tempfolder)\\..\\tests","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Vssi TfsOnPrem","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd ","arguments":"TfsOnPrem /config:$(build.config)","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Setup tests runtime configuration","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\setupTestsRuntimeConfiguration.ps1","arguments":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Install TfsClient","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.TfsClient) /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy ddconfig.dll","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"\"$(TFSInstallLocation)\\Tools\\ddconfig.dll\"  $(release.tempfolder)\\..\\tests","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run RMCDPOnPrem Upgrade tests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.tempfolder)\\..\\tests\\MS.TF.Test.Admin.ConfigTests.dll","testFiltercriteria":"","runSettingsFile":"","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"/Tests:UpgradeLastMilestone,Upgrade2013 /Platform:x64","testRunTitle":"TsfOnPremUpgrade","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Pause agent on test failure","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\PauseAgentOnTaskFailure.ps1","arguments":"-AlternateCredentialsUserName  $(release.alternateusername) -AlternateCredentialsPassword  $(release.alternatepassword) -ReleaseId  $(Release.ReleaseId)  -TaskName $(TaskToDebugName) -NumberOfSeconds $(TaskToDebugTimeInSeconds)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}}],"id":13966},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13973}]},"queueId":137,"runOptions":{"EnvironmentOwnerEmailNotificationType":"Never","skipArtifactsDownload":"True","TimeoutInMinutes":"0"},"environmentOptions":{"emailNotificationType":"Never","skipArtifactsDownload":true,"timeoutInMinutes":0},"demands":["rmcdpcapability -equals tfsonpremupgrade","Agent.Version -gtVersion 1.87"],"conditions":[{"name":"ReleaseStarted","conditionType":"event","value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0}},{"id":1698,"name":"XPlat","rank":7,"owner":{"id":"6ad72824-29c5-45e0-a37c-e0bb342d463c","displayName":"Ankit Goyal","uniqueName":"angoya@microsoft.com","url":"https://mseng.vssps.visualstudio.com/_apis/Identities/6ad72824-29c5-45e0-a37c-e0bb342d463c","imageUrl":"https://mseng.visualstudio.com/_api/_common/identityImage?id=6ad72824-29c5-45e0-a37c-e0bb342d463c"},"variables":{"release.productsgroupscommaseparated":{"value":"\"tfsscripteddeploy,tfsonprem,Tfs.Tests,RMTest,RM2Test\""},"release.testenv":{"value":"/token:TEST_ENVIRONMENT=TestEnvCDPTfat"},"release.TfsScriptedDeploy":{"value":"TfsScriptedDeploy"},"release.TfsScriptedDeployOptions":{"value":"/token:DEPLOY_DIR=C:\\temp\\bin\\TfsScriptedDeploy"},"TaskToDebugName":{"value":"\"Run xplat tests\""}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13974}]},"deployStep":{"tasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download Artifacts - To be removed","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\downloadArtifacts.ps1","arguments":"$(CDPScriptsShare) $(build.buildid) $(release.alternateusername) $(release.alternatepassword)  $(Agent.Workfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Cleanup Temp","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupTemp.cmd","arguments":"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Clean up xplat agents","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\TriggerRelease.ps1","arguments":"-TfsCollectionUri https://mseng.vsrm.visualstudio.com/DefaultCollection/ -TeamProject VSOnline -ReleaseDefinitionId 42 -AlternateCredentialsUserName $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -TargetEnvironmentId 55","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.tempfolder)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete previous run tests folder","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.tempfolder)\\..\\Tests","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Vssbinfetch product groups","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\DeployTools -BuildId $(build.buildId) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.tempfolder) -ProductGroups $(release.productsgroupscommaseparated) -InstallOptions $(release.testenv)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy TfsScriptedDeploy","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.TfsScriptedDeploy) /Configuration:$(build.config) $(release.testenv) $(release.TfsScriptedDeployOptions) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"TfsCleanup","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\TfsScriptedDeploy\\TfsCleanup.exe","arguments":"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Tfat cleanup with retries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupTfat.ps1","arguments":"-NumberOfRetries 10 -SleepTimeBetweenRetriesInSeconds 30","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Run tfat","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\runtfat.cmd","arguments":"$(release.tempfolder)\\scripts $(build.config)","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Run ConfigureAgent.cmd - to be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(CDPScriptsShare)\\ConfigureAgent.cmd","arguments":"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Trigger vso.rm.xplat build","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\QueueBuildXplat.ps1","arguments":"-TfsCollectionUri https://mseng.visualstudio.com/DefaultCollection/ -TeamProject VSOnline -AlternateCredentialsUserName $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Trigger RM.CDP.XplatSetup","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\TriggerRelease.ps1","arguments":"-TfsCollectionUri https://mseng.vsrm.visualstudio.com/DefaultCollection/ -TeamProject VSOnline -ReleaseDefinitionId 93 -AlternateCredentialsUserName $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -TargetEnvironmentId 155","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Setup tests runtime configuration","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\setupTestsRuntimeConfiguration.ps1","arguments":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy RM2Test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.testgroup2) /Configuration:$(build.config) $(release.testenv) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy TfsTests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.TfsTests) /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy TestEnvCDPTfat test environment file","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(release.tempfolder)\\..\\Tests\\TestEnvironments\\TestEnvCDPTfat\\TestEnvironment.xml  $(release.tempfolder)\\..\\Tests\\TestEnvironment.xml","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Enable Basic Auth","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\EnableBasicAuthTfat.ps1","arguments":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Set environment variables at release level","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\SetEnvironmentVariables.ps1","arguments":"-TeamProject VSOnline -ReleaseDefinitionId 77 -AlternateCredentialsUserName $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run xplat tests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.tempfolder)\\..\\Tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"TestCategory=RMCDPXplat","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"XPlat","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Pause agent on test failure","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\PauseAgentOnTaskFailure.ps1","arguments":"-AlternateCredentialsUserName  $(release.alternateusername) -AlternateCredentialsPassword  $(release.alternatepassword) -ReleaseId  $(Release.ReleaseId)  -TaskName $(TaskToDebugName) -NumberOfSeconds $(TaskToDebugTimeInSeconds)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}}],"id":13975},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":13976}]},"queueId":137,"runOptions":{"EnvironmentOwnerEmailNotificationType":"Never","skipArtifactsDownload":"True","TimeoutInMinutes":"0"},"environmentOptions":{"emailNotificationType":"Never","skipArtifactsDownload":true,"timeoutInMinutes":0},"demands":["rmcdpcapability -equals xplat","Agent.Version -gtVersion 1.87"],"conditions":[{"name":"ReleaseStarted","conditionType":"event","value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0}},{"id":1807,"name":"MmsLoadTest","rank":10,"owner":{"id":"eebbc485-dcc9-40f8-b5fa-828059557200","displayName":"Harshil Lodhi","uniqueName":"harslo@microsoft.com","url":"https://mseng.vssps.visualstudio.com/_apis/Identities/eebbc485-dcc9-40f8-b5fa-828059557200","imageUrl":"https://mseng.visualstudio.com/_api/_common/identityImage?id=eebbc485-dcc9-40f8-b5fa-828059557200"},"variables":{"ApiCertificateThumbprint":{"value":"A4659f4277d064974b993b6d34ce4a1707586501"},"ImageLocation":{"value":"\\\"https://tfsbuild100.blob.core.windows.net/vhds/VSO.M88.Task.2.vhd\\\""},"ImageName":{"value":"VSO.M88.Task.2"},"lrfolder":{"value":"C:\\LR"},"MachineCount":{"value":"5"},"MMSDeploymentFilePath":{"value":"\\\\vscsstor\\phantom\\AzureCerts\\RM\\Deployments\\tfspm3.mms.deployment"},"MMSDeploymentName":{"value":"tfspm3.mms"},"MsTest":{"value":"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\mstest.exe"},"MsTestFolder":{"value":"\"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\\""},"PoolName":{"value":"main2"},"pooltype":{"value":"taskagent2"},"release.productsgroupscommaseparated":{"value":"tfs,rmo,mms,machinemanagement.tests"},"RmoDeploymentFilePath":{"value":"\\\\vscsstor\\phantom\\AzureCerts\\RM\\Deployments\\tfspm3rm.deployment"},"RMODeploymentName":{"value":"tfspm3rm"},"SubscriptionId":{"value":"b7a1d774-113d-4364-82af-75ce6919ef88"},"TfsDeploymentFilePath":{"value":"\\\\vscsstor\\phantom\\AzureCerts\\RM\\Deployments\\tfspm3.int.deployment"},"TfsDeploymentName":{"value":"tfspm3.int"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":14391}]},"deployStep":{"tasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download Artifacts - To be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\downloadArtifacts.ps1","arguments":"$(CDPScriptsShare) $(build.buildid) $(release.alternateusername) $(release.alternatepassword)  $(Agent.Workfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Clean The Temp Folder","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.ps1","arguments":"$(release.tempfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Kill LR ","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\lightrailKill.cmd","arguments":"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Clean the LR folder","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.ps1","arguments":"$(LRFolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"VssBinFetch","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\DeployTools -BuildId $(build.buildId) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.tempfolder) -ProductGroups \"$(release.productsgroupscommaseparated)\"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy TFS,MMS and Tests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.tempfolder)\\scripts\\vssi.cmd","arguments":"$(release.productsgroupscommaseparated) /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.tempfolder)\\scripts","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy tfs Deployment File(Change Source Path)","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(TfsDeploymentFilePath) $(LRFolder)\\tfs\\Services\\tfs\\Deployments\\$(TfsDeploymentName).deployment","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"TFS Deploy to AppFabric","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\Tfs\\LightRail.exe","arguments":" -NoClear -Initial Tfs\\$(TfsDeploymentName) -command \"Uninstall-Service ; Deploy-Service -DropExistingDatabases\"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Enable TFS feature flags","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\Tfs\\LightRail.exe","arguments":" -NoClear -Initial Tfs\\$(TfsDeploymentName) -command \"Set-FeatureFlag -FeatureName WebAccess.ReleaseManagement.ReleasesHub -State On ; Set-FeatureFlag -FeatureName VisualStudio.Services.Contribution -State On ; Set-FeatureFlag -FeatureName WebAccess.ReleaseManagement.ReleasesHub.HostedPool -State On\"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy rmo Deployment File(Change Source Path)","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(RmoDeploymentFilePath) $(LRFolder)\\ReleaseManagement\\Services\\ReleaseManagement\\Deployments\\$(RmoDeploymentName).deployment","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"RMO Deploy to AppFabric","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\ReleaseManagement\\LightRail.exe","arguments":" -NoClear -Initial ReleaseManagement\\$(RMODeploymentName) -command \"Uninstall-Service ; Deploy-Service -DropExistingDatabases\"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Enable Hosted Pool Feature Flag","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\ReleaseManagement\\LightRail.exe","arguments":" -NoClear -Initial ReleaseManagement\\$(RMODeploymentName) -command \"Set-FeatureFlag -FeatureName WebAccess.ReleaseManagement.ReleasesHub.HostedPool -State On\"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Enable Tracing","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\tfs\\LightRail.exe","arguments":" -NoClear -Initial  Tfs\\$(TfsDeploymentName) -command \"Add-TraceDefinition -Area MachineManagement -Layer Orchestration ; Add-TraceDefinition -Area MachineManagement -Layer Service ; Add-TraceDefinition -Area DistributedTask\"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Delete CloudService From Azure - (Check whether Delete-Machine-Pool Works or not)","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(release.temptest)\\DeleteDeployments.ps1","arguments":" -credSettingsPath \"\\\\vscsstor\\Phantom\\AzureCerts\\RM\\Subscriptions\\hostedbuild-creds.publishsettings\"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy Deployment File for MMS.","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(MMSDeploymentFilePath) $(lrfolder)\\mms\\Services\\mms\\Deployments\\$(MMSDeploymentName).deployment","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"New Machine Pool Type Creation","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\mms\\LightRail.exe","arguments":" -NoClear -Initial mms\\$(MMSDeploymentName) -command \"New-MachinePoolType -PoolType $(PoolType) -Backend Orchestration -SubscriptionId $(SubscriptionId) -ApiCertificateThumbprint $(ApiCertificateThumbprint)\"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Add Machine OS Image","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\mms\\LightRail.exe","arguments":" -NoClear -Initial mms\\$(MMSDeploymentName) -command \"Add-MachinePoolImage -PoolType $(PoolType) -ImageName $(ImageName) -ImageLocation $(ImageLocation)\"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"New Machine Pool Creation [Hacked change later]","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\mms\\LightRail.exe","arguments":" -NoClear -Initial mms\\$(MMSDeploymentName) -command \"New-MachinePool -PoolType $(PoolType) -PoolName $(PoolName) -ImageName$(ImageName)-MachineCount $(MachineCount) -RequestTimeoutInMinutes 30 -StoragePoolName mmstest -StoragePoolLocation \\\"East US 2\\\" -StoragePoolSize 1 -StoragePoolStartIndex 3 -RoleSize Standard_D2\"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Wait 30 mins","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"\\\\vscsstor\\Users\\harslo\\wait_sec.ps1","arguments":"1800","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy Dlls to MSTest Folder ( Remove this when CLT bug is closed)","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"\\\\vscsstor\\Users\\harslo\\DLLsCopy.ps1","arguments":"$(release.temptest) $(MsTestFolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Final Project Creation.","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(release.temptest)\\CreateProject.ps1","arguments":"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Warmup for test.","enabled":false,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"filename":"$(MsTest)","arguments":"/testcontainer:MachineManagementWarmUp.loadtest","modifyEnvironment":"false","workingFolder":"$(release.temptest)","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Release Hack","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"filename":"$(MsTest)","arguments":"/testcontainer:MachineManagementWarmUp.loadtest","modifyEnvironment":"false","workingFolder":"$(release.temptest)","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Load Test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(MsTest)","arguments":"/testcontainer:MachineManagement.loadtest","modifyEnvironment":"false","workingFolder":"$(release.temptest)","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"AnalyzeLoadTest","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(release.temptest)\\AnalyzeLoadTestTrx.ps1","arguments":" -trxFolderPath \"$(release.temptest)\\TestResults\"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Kill LightRail","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\lightrailKill.cmd","arguments":"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete MachinePool","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\mms\\LightRail.exe","arguments":" -NoClear -Initial mms\\tfspm3.mms -command \"Remove-MachinePool -PoolType $(PoolType) -PoolName $(PoolName) -Force\"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete Machine OS Image","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\mms\\LightRail.exe","arguments":" -NoClear -Initial mms\\tfspm3.mms -command \"Remove-MachinePoolImage -PoolType $(PoolType) -ImageName VSO.M86.Task.1\"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Remove Machine Pool  Type","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\mms\\LightRail.exe","arguments":" -NoClear -Initial mms\\tfspm3.mms -command \"Remove-MachinePoolType -PoolType $(PoolType)\"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"ReTrigger MMSLoadTest BD.","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(release.temptest)\\TriggerBuild.ps1","arguments":" -TfsCollectionUri \"https://mseng.visualstudio.com/DefaultCollection\"  -TeamProject \"VSOnline\" -BuildDefinitionId \"2099\" -userName \"$(userName)\" -password \"$(password)\"","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}}],"id":14392},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":14393}]},"queueId":137,"runOptions":{"EnvironmentOwnerEmailNotificationType":"Never","skipArtifactsDownload":"True","TimeoutInMinutes":"0"},"environmentOptions":{"emailNotificationType":"Never","skipArtifactsDownload":true,"timeoutInMinutes":0},"demands":["rmcdpcapability -equals mmsloadtest","Agent.Version -gtVersion 1.87"],"conditions":[],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0}},{"id":1823,"name":"AtDtMismatch","rank":11,"owner":{"id":"722be998-3f41-4c4d-a69a-835db7a0fc55","displayName":"[VSOnline]\\RM Online DRIs","uniqueName":"vstfs:///Classification/TeamProject/b924d696-3eae-4116-8443-9a18392d8544\\RM Online DRIs","url":"https://mseng.vssps.visualstudio.com/_apis/Identities/722be998-3f41-4c4d-a69a-835db7a0fc55","imageUrl":"https://mseng.visualstudio.com/_api/_common/identityImage?id=722be998-3f41-4c4d-a69a-835db7a0fc55","isContainer":true},"variables":{"release.currentdevfabricsfordownload":{"value":"\"rmo,RM2Test,Tfs.Tests\""},"release.goldendevfabricsfordownload":{"value":"\"sps,tfs,rmo,RM2Test,Tfs.Tests\""},"release.testenv":{"value":"/token:TEST_ENVIRONMENT=TestEnvCDPATDT"},"TaskToDebugName":{"value":"\"Run Tests post upgrade\""}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":14456}]},"deployStep":{"tasks":[{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download Artifacts - To Be Removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\downloadArtifacts.ps1","arguments":"$(CDPScriptsShare) $(build.buildid) $(release.alternateusername) $(release.alternatepassword)  $(Agent.Workfolder)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Cleanup Temp","enabled":true,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CleanupTemp.cmd","arguments":"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete Current Binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.currentbin)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete Tests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.currentbin)\\..\\tests","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download current Rmo binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\DeployTools -BuildId $(build.buildId) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.currentbin) -ProductGroups $(release.currentdevfabricsfordownload) -InstallOptions $(release.testenv)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Compute Golden VSO.RM.CI Build","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\SetGoldenBuildInfo.ps1","arguments":"-RMDefaultsFilePath $(release.currentbin)\\Release.AnyCPU\\ReleaseManagement.Service\\Settings\\ReleaseManagement.Defaults -TfsCollectionUri https://mseng.visualstudio.com/DefaultCollection/ -TeamProject VSOnline -AlternateCredentialsUserName $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -BuildDefinitionId 1715 -BuildCount 150","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download golden artifacts - to be removed","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(CDPScriptsShare)\\downloadArtifacts.ps1","arguments":"$(CDPScriptsShare) $(release.goldenbuildid) $(release.alternateusername) $(release.alternatepassword)  $(Agent.Workfolder)\\GoldenBuildArtifacts","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete golden binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.goldenbin)","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Delete golden tests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\DeleteFileFolder.cmd","arguments":"$(release.goldenbin)\\..\\tests","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Download golden binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\GoldenBuildArtifacts\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\downloadFromBuildDrop.ps1","arguments":"-DeployToolsScriptsPath $(Agent.Workfolder)\\GoldenBuildArtifacts\\DeployTools -BuildId $(release.goldenbuildid) -AlternateCredentialsUsername $(release.alternateusername) -AlternateCredentialsPassword $(release.alternatepassword) -Config $(build.config) -DestinationDir $(release.goldenbin) -ProductGroups $(release.goldendevfabricsfordownload)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Install golden Sps Tfs Rmo binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.goldenbin)\\scripts\\vssi.cmd","arguments":"sps tfs rmo /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.goldenbin)\\scripts","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Copy DeploymentFiles and Certs","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyDeploymentFiles.bat","arguments":"","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"Deploy and configure golden RM Service Drop Existing DBs","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\ReleaseManagement\\LightRail.exe","arguments":"-NoClear -Initial ReleaseManagement\\rmsatdtcdp -command \"Deploy-Service -DropExistingDatabases\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Sleep 300 seconds","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\Sleep.bat","arguments":"300","modifyEnvironment":"false","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy golden Tests","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.goldenbin)\\scripts\\vssi.cmd","arguments":"Tfs.Tests ReleaseManagement2.Tests /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.goldenbin)\\scripts","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy TE.xml [Golden]","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(release.goldenbin)\\$(build.config).AnyCPU\\ReleaseManagement.Tests\\TestEnvironments\\TestEnvCDPATDT\\TestEnvironment.xml  $(release.goldenbin)\\..\\tests\\TestEnvironment.xml","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Delete Team Project","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.goldenbin)\\..\\tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"Name=DeleteTeamProject","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"AtDtMismatch-DeleteTeamProject","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Ping test","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.goldenbin)\\..\\tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"Name=PingDeploymentAndInitializeTestData","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"AtDtMismatch-Ping","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Test Assemblies $(release.goldenbin)\\..\\tests\\MS.TF.Test.Release3.dll","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.goldenbin)\\..\\tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"TestCategory=RMCDPOnLineRmGtTfs","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"AtDtMismatch-PreUpgrade","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Create Long Release","enabled":false,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"testAssembly":"$(release.goldenbin)\\..\\tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"Name=CreateGoldenArtifactsAndQueueLongRelease","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"AtDtMismatch-CreateLongRelease","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Install current Rmo binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.currentbin)\\scripts\\vssi.cmd","arguments":"rmo /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.currentbin)","failOnStandardError":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"Upgrade Config DB Pre Binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\ReleaseManagement\\LightRail.exe","arguments":"-NoClear -Initial ReleaseManagement\\rmsatdtcdp -command \"Update-ServiceConfigDb -Stage PreBinaries\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"Update Service Binaries","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\ReleaseManagement\\LightRail.exe","arguments":"-NoClear -Initial ReleaseManagement\\rmsatdtcdp -command \"Update-ServiceBinaries\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"*","name":"Deploy current Tests","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"$(release.currentbin)\\scripts\\vssi.cmd","arguments":"ReleaseManagement2.Tests /Configuration:$(build.config) /WarningsToStdout","modifyEnvironment":"false","workingFolder":"$(release.currentbin)\\scripts","failOnStandardError":"false"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Copy TE.xml [Current]","enabled":false,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\CopyFiles.ps1","arguments":"$(release.currentbin)\\$(build.config).AnyCPU\\ReleaseManagement.Tests\\TestEnvironments\\TestEnvCDPATDT\\TestEnvironment.xml  $(release.currentbin)\\..\\tests\\TestEnvironment.xml","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run golden binaries tests under AT DT Mismatch","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.goldenbin)\\..\\tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"TestCategory=RMCDPOnLineRmGtTfs","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"AtDtMismatch-PostAtOnlyUpgrade","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"Update Service Config DB","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\ReleaseManagement\\LightRail.exe","arguments":"-NoClear -Initial ReleaseManagement\\rmsatdtcdp -command \"Update-ServiceConfigDb -Stage Main\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"Update Partition DB","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\ReleaseManagement\\LightRail.exe","arguments":"-NoClear -Initial ReleaseManagement\\rmsatdtcdp -command \"Update-ServicePartitionDbs\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","version":"*","name":"Update Config DB ","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"filename":"C:\\LR\\ReleaseManagement\\LightRail.exe","arguments":"-NoClear -Initial ReleaseManagement\\rmsatdtcdp -command \"Update-ServiceConfigDb -Stage PostPartitionDbs\"","workingFolder":"","failOnStandardError":"false"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Run Tests post upgrade","enabled":true,"alwaysRun":false,"continueOnError":false,"definitionType":null,"inputs":{"testAssembly":"$(release.goldenbin)\\..\\tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"TestCategory=RMCDPOnLineRmGtTfs","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"AtDtMismatch-PostAtDtUpgrade","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"ef087383-ee5e-42c7-9a53-ab56c98420f9","version":"*","name":"Verify Long Release","enabled":false,"alwaysRun":false,"continueOnError":true,"definitionType":null,"inputs":{"testAssembly":"$(release.goldenbin)\\..\\tests\\MS.TF.Test.Release3.dll","testFiltercriteria":"Name=VerifyLongRelease","runSettingsFile":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\VsTest.Settings","overrideTestrunParameters":"","codeCoverageEnabled":"false","runInParallel":"false","vsTestVersion":"latest","pathtoCustomTestAdapters":"","otherConsoleOptions":"","testRunTitle":"AtDtMismatch-VerifyLongRelease","platform":"","configuration":"","publishRunAttachments":"true"}},{"taskId":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","version":"*","name":"Pause agent on test failure","enabled":false,"alwaysRun":true,"continueOnError":false,"definitionType":null,"inputs":{"scriptType":"filePath","scriptName":"$(Agent.Workfolder)\\CDPScripts\\ReleaseManagement\\bld\\CDPScripts\\PauseAgentOnTaskFailure.ps1","arguments":"-AlternateCredentialsUserName  $(release.alternateusername) -AlternateCredentialsPassword  $(release.alternatepassword) -ReleaseId  $(Release.ReleaseId)  -TaskName $(TaskToDebugName) -NumberOfSeconds $(TaskToDebugTimeInSeconds)","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","workingFolder":""}}],"id":14457},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":14458}]},"queueId":137,"runOptions":{"EnvironmentOwnerEmailNotificationType":"Never","skipArtifactsDownload":"True","TimeoutInMinutes":"0"},"environmentOptions":{"emailNotificationType":"Never","skipArtifactsDownload":true,"timeoutInMinutes":0},"demands":["rmcdpcapability -equals atdt","Agent.Version -gtVersion 1.87"],"conditions":[],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0}}],"artifacts":[{"id":3,"type":"Build","alias":"VSO.RM.CI","definitionReference":{"artifacts":{"id":"DeployTools","name":"DeployTools"},"definition":{"id":"1715","name":"VSO.RM.CI"},"project":{"id":"b924d696-3eae-4116-8443-9a18392d8544","name":"VSOnline"}}}],"triggers":[{"artifactAlias":"VSO.RM.CI","triggerType":"artifactSource"}],"releaseNameFormat":"RM.CDP_$(Build.BuildNumber).$(rev:r)","retentionPolicy":{"daysToKeep":60}}